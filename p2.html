<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Monopoly Board</title>
<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  width: 100%;
  background: black;
  font-family: sans-serif;
  display: flex;
}

/* Left: Board */
#boardContainer {
  width: 55%;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  position: relative;
  background: black;
}

/* Board inner */
#board {
  position: relative;
  width: 900px;
  display: flex;
  flex-direction: column;
  align-items: center;
}
#boardImg {
  width: 100%;
  height: 900px;
  object-fit: contain;
}

/* Pieces */
.piece {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  position: absolute;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  border: 3px solid transparent;
  box-shadow: 0 0 6px rgba(0,0,0,0.4);
  transition: left 0.4s ease, top 0.4s ease;
  color: white;
}
.red { background:#ff4d4d; border-color:#ff8080; }
.blue { background:#3399ff; border-color:#66a3ff; }
.yellow { background:goldenrod; border-color:#ffde59; color:black; }
.green { background:limegreen; border-color:#aaffaa; color:black; }

/* Central container for money + display */
#centralDisplayContainer {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 25px;
  z-index: 10;
}

#moneyContainer {
  display: flex;
  flex-direction: column;
  gap: 20px;       /* slightly bigger gap */
  width: 175px;    /* wider than before */
}

.moneyBox {
  padding: 15px 20px;   /* bigger padding */
  border-radius: 12px;
  width: 100%;          /* fills container */
  text-align: center;
  font-weight: bold;
  font-size: 20px;      /* larger font */
  word-wrap: break-word;
  box-shadow: 0 0 18px #6a0dad, 0 0 24px #00d4ff;
  color: white;
}
.moneyBox.red { background:#ff4d4d; }
.moneyBox.blue { background:#3399ff; }
.moneyBox.yellow { background:goldenrod; color:black; }
.moneyBox.green { background:limegreen; color:black; }

/* Display boxes */
#displayContainer{
  display:flex;
  flex-direction:column;
  gap:15px;
  align-items:center;
}
.displayBox{
  padding:15px 20px;
  border-radius:12px;
  width:300px;
  text-align:center;
  font-weight:bold;
  font-size:22px;
  background:linear-gradient(135deg,#6a0dad,#00d4ff);
  color:white;
  box-shadow:0 0 12px #6a0dad,0 0 18px #00d4ff;
  word-wrap:break-word;
}

/* Quick links with absolute positioning */
#propertyLink, #rulesLink{
  position:absolute;
  z-index:20;
}
#propertyLink img, #rulesLink img{
  width:120px;
  border-radius:8px;
  box-shadow:0 0 6px rgba(255,255,255,0.5);
}

/* Example positions: */
#propertyLink{ top:40%; left:200px; transform:translateY(-50%); }
#rulesLink{ top:50%; right:580px; transform:translateY(-50%); }

/* Buildings */
.hotel,.house{
  width:24px;
  height:24px;
  position:absolute;
}

/* Redeem/Mortgage buttons */
.mode-btn {
  padding: 6px 12px;
  font-size: 0.9em;
  border-radius: 5px;
  border: 1px solid #555;
  background: #111;
  color: #eee;
  cursor: pointer;
  text-align: center;
  transition: all 0.2s ease;
}
.mode-btn.active {
  background: #0077ff;
  color: #fff;
  border-color: #00aaff;
}
.mode-btn:hover {
  background: #333;
}

#modeToggle {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 6px;
  margin-top: -40px; /* closer to map.webp */
  z-index: 60;
  position: relative;
}

/* Top buttons */
#topButtons button {
  padding: 8px 10px;
  font-size: 1em;
  font-weight: bold;
  cursor: pointer;
  border: none;
  border-radius: 8px;
  color: #fff;
  background: linear-gradient(45deg, #0f4f36, #ff416c);
  box-shadow: 0 4px 8px rgba(0,0,0,0.4);
  transition: all 0.2s ease;
  text-shadow: 0 1px 2px rgba(0,0,0,0.5);
}
#topButtons button:hover {
  transform: translateY(-2px) scale(1.05);
  box-shadow: 0 6px 10px rgba(0,0,0,0.5);
}
#topButtons button:active {
  transform: translateY(1px) scale(0.98);
  box-shadow: 0 3px 6px rgba(0,0,0,0.3);
}

/* Small buttons */
.small-button {
  padding: 4px 8px;
  font-size: 0.9em;
  border-radius: 6px;
  background: #222;
  color: white;
  cursor: pointer;
}

/* Right: Controls */
#controlsContainer {
  width: 45%;
  height: 100%;
  background: #111;
  display: flex;
  flex-direction: column;
}

/* Inner container for buttons + chat */
#controlsInner {
  display: flex;
  flex-direction: column;
  height: 100%;
  padding: 10px;
  box-sizing: border-box;
}

/* Chat iframe fills remaining space */
#chatFrame {
  flex-grow: 1;
  width: 100%;
  border: none;
  min-height: 0;
}

/* + buttons green */
.white-btn.plus {
  background-color: #28a745 !important;  /* green */
  border: 1px solid #1e7e34 !important;
  color: white !important;
  padding: 2px 4px;
  border-radius: 5px;
  font-weight: bold;
  cursor: pointer;
}

/* - buttons red */
.white-btn.minus {
  background-color: #dc3545 !important;  /* red */
  border: 1px solid #b02a37 !important;
  color: white !important;
  padding: 2px 4px;
  border-radius: 5px;
  font-weight: bold;
  cursor: pointer;
}

/* optional hover effect */
.white-btn.plus:hover { background-color: #218838 !important; }
.white-btn.minus:hover { background-color: #c82333 !important; }



</style>
</head>
<body>

<!-- Left: Board -->
<div id="boardContainer">
<div id="board">
<img id="boardImg" src="map.webp" alt="Monopoly Board">
<div id="p1" class="piece red">p1</div>
<div id="p2" class="piece blue">p2</div>
<div id="p3" class="piece yellow">p3</div>
<div id="p4" class="piece green">p4</div>
<div id="boardButtons"></div>
<div id="centralDisplayContainer">
<div id="moneyContainer">
<div id="money-p1-overlay" class="moneyBox red">Player1: $0</div>
<div id="money-p2-overlay" class="moneyBox blue">Player2: $0</div>
<div id="money-p3-overlay" class="moneyBox yellow">Player3: $0</div>
<div id="money-p4-overlay" class="moneyBox green">Player4: $0</div>
</div>
<div id="displayContainer">
<div id="display1" class="displayBox">Display 1</div>
<div id="display2" class="displayBox">Display 2</div>
</div>
</div>
<div id="propertyLink">
<a href="https://raw.githubusercontent.com/nightywolfy/monopoly/main/properties.jpg" target="_blank">
<img src="https://raw.githubusercontent.com/nightywolfy/monopoly/main/properties.jpg">
</a>
</div>
<div id="rulesLink">
<a href="https://raw.githubusercontent.com/nightywolfy/monopoly/main/rules.jpg" target="_blank">
<img src="https://raw.githubusercontent.com/nightywolfy/monopoly/main/rules.jpg">
</a>
</div>
<audio id="sndBuild2" src="https://raw.githubusercontent.com/nightywolfy/monopoly/main/build2.mp3" preload="auto"></audio>
<audio id="sndBuild3" src="https://raw.githubusercontent.com/nightywolfy/monopoly/main/build3.mp3" preload="auto"></audio>
<audio id="sndDestroy2" src="https://raw.githubusercontent.com/nightywolfy/monopoly/main/destroy2.mp3" preload="auto"></audio>
<audio id="sndDestroy3" src="https://raw.githubusercontent.com/nightywolfy/monopoly/main/destroy3.mp3" preload="auto"></audio>
</div>
<!-- Mode buttons BELOW the map -->
<div id="modeToggle">
<form action="/send-irc" method="POST" target="hiddenFrame">
<input type="hidden" name="bot" value="player4bot">
<input type="hidden" name="msg" value="!addonehouse dblue">
<button class="white-btn plus" onclick="sndBuild2.currentTime=0; sndBuild2.play()">DB+</button>
</form>
<form action="/send-irc" method="POST" target="hiddenFrame">
<input type="hidden" name="bot" value="player4bot">
<input type="hidden" name="msg" value="!addonehouse brown">
<button class="white-btn plus" onclick="sndBuild3.currentTime=0; sndBuild3.play()">BR+</button>
</form>
<form action="/send-irc" method="POST" target="hiddenFrame">
<input type="hidden" name="bot" value="player4bot">
<input type="hidden" name="msg" value="!addonehouse blue">
<button class="white-btn plus" onclick="sndBuild3.currentTime=0; sndBuild3.play()">BL+</button>
</form>
<form action="/send-irc" method="POST" target="hiddenFrame">
<input type="hidden" name="bot" value="player4bot">
<input type="hidden" name="msg" value="!addonehouse green">
<button class="white-btn plus" onclick="sndBuild3.currentTime=0; sndBuild3.play()">GR+</button>
</form>
<form action="/send-irc" method="POST" target="hiddenFrame">
<input type="hidden" name="bot" value="player4bot">
<input type="hidden" name="msg" value="!addonehouse yellow">
<button class="white-btn plus" onclick="sndBuild3.currentTime=0; sndBuild3.play()">YE+</button>
</form>
<form action="/send-irc" method="POST" target="hiddenFrame">
<input type="hidden" name="bot" value="player4bot">
<input type="hidden" name="msg" value="!addonehouse pink">
<button class="white-btn plus" onclick="sndBuild3.currentTime=0; sndBuild3.play()">PI+</button>
</form>
<form action="/send-irc" method="POST" target="hiddenFrame">
<input type="hidden" name="bot" value="player4bot">
<input type="hidden" name="msg" value="!addonehouse orange">
<button class="white-btn plus" onclick="sndBuild3.currentTime=0; sndBuild3.play()">OR+</button>
</form>
<form action="/send-irc" method="POST" target="hiddenFrame">
<input type="hidden" name="bot" value="player4bot">
<input type="hidden" name="msg" value="!addonehouse red">
<button class="white-btn plus" onclick="sndBuild2.currentTime=0; sndBuild2.play()">RE+</button>
</form>
<button type="button" class="mode-btn active" data-mode="redeem">Redeem</button>
<button type="button" class="mode-btn" data-mode="mortgage">Mortgage</button>
<form action="/send-irc" method="POST" target="hiddenFrame">
<input type="hidden" name="bot" value="player4bot">
<input type="hidden" name="msg" value="!removeonehouse dblue">
<button class="white-btn minus" onclick="sndDestroy2.currentTime=0; sndDestroy2.play()">DB-</button>
</form>
<form action="/send-irc" method="POST" target="hiddenFrame">
<input type="hidden" name="bot" value="player4bot">
<input type="hidden" name="msg" value="!removeonehouse brown">
<button class="white-btn minus" onclick="sndDestroy3.currentTime=0; sndDestroy3.play()">BR-</button>
</form>
<form action="/send-irc" method="POST" target="hiddenFrame">
<input type="hidden" name="bot" value="player4bot">
<input type="hidden" name="msg" value="!removeonehouse blue">
<button class="white-btn minus" onclick="sndDestroy3.currentTime=0; sndDestroy3.play()">BL-</button>
</form>
<form action="/send-irc" method="POST" target="hiddenFrame">
<input type="hidden" name="bot" value="player4bot">
<input type="hidden" name="msg" value="!removeonehouse green">
<button class="white-btn minus" onclick="sndDestroy3.currentTime=0; sndDestroy3.play()">GR-</button>
</form>
<form action="/send-irc" method="POST" target="hiddenFrame">
<input type="hidden" name="bot" value="player4bot">
<input type="hidden" name="msg" value="!removeonehouse yellow">
<button class="white-btn minus" onclick="sndDestroy3.currentTime=0; sndDestroy3.play()">YE-</button>
</form>
<form action="/send-irc" method="POST" target="hiddenFrame">
<input type="hidden" name="bot" value="player4bot">
<input type="hidden" name="msg" value="!removeonehouse pink">
<button class="white-btn minus" onclick="sndDestroy3.currentTime=0; sndDestroy3.play()">PI-</button>
</form>
<form action="/send-irc" method="POST" target="hiddenFrame">
<input type="hidden" name="bot" value="player4bot">
<input type="hidden" name="msg" value="!removeonehouse orange">
<button class="white-btn minus" onclick="sndDestroy3.currentTime=0; sndDestroy3.play()">OR-</button>
</form>
<form action="/send-irc" method="POST" target="hiddenFrame">
<input type="hidden" name="bot" value="player4bot">
<input type="hidden" name="msg" value="!removeonehouse red">
<button class="white-btn minus" onclick="sndDestroy2.currentTime=0; sndDestroy2.play()">RE-</button>
</form>
</div>
</div>
</div>

<!-- Right: Controls -->
<div id="controlsContainer">
<div id="controlsInner">
<iframe name="hiddenFrame" style="display:none;"></iframe>
<audio id="buttonClickSound" src="https://raw.githubusercontent.com/nightywolfy/monopoly/main/click.mp3" preload="auto"></audio>
<div id="topButtons" style="margin-bottom:10px; display:flex; flex-wrap:wrap; gap:4px; justify-content:center; align-items:center;">
<form action="/send-irc" method="POST" target="hiddenFrame"><input type="hidden" name="bot" value="player4bot"><input type="hidden" name="msg" value="!dice1-p2"><button type="submit" onclick="document.getElementById('buttonClickSound').play();">D1</button></form>
<form action="/send-irc" method="POST" target="hiddenFrame"><input type="hidden" name="bot" value="player4bot"><input type="hidden" name="msg" value="!dice2-p2"><button type="submit" onclick="document.getElementById('buttonClickSound').play();">D2</button></form>
<form action="/send-irc" method="POST" target="hiddenFrame"><input type="hidden" name="bot" value="player4bot"><input type="hidden" name="msg" value="!dice3-p2"><button type="submit" onclick="document.getElementById('buttonClickSound').play();">D3</button></form>
<form action="/send-irc" method="POST" target="hiddenFrame"><input type="hidden" name="bot" value="player4bot"><input type="hidden" name="msg" value="!dice4-p2"><button type="submit" onclick="document.getElementById('buttonClickSound').play();">DJ</button></form>
<form action="/send-irc" method="POST" target="hiddenFrame"><input type="hidden" name="bot" value="player4bot"><input type="hidden" name="msg" value="!up"><button type="submit" class="small-button">UP2</button></form>
<div style="width:2px; background:#888; margin:0 2px;"></div>
<form action="/send-irc" method="POST" target="hiddenFrame"><input type="hidden" name="bot" value="player4bot"><input type="hidden" name="msg" value="!add p2 25"><button type="submit" class="small-button">+25</button></form>
<form action="/send-irc" method="POST" target="hiddenFrame"><input type="hidden" name="bot" value="player4bot"><input type="hidden" name="msg" value="!add p2 5"><button type="submit" class="small-button">+5</button></form>
<form action="/send-irc" method="POST" target="hiddenFrame"><input type="hidden" name="bot" value="player4bot"><input type="hidden" name="msg" value="!add p2 -25"><button type="submit" class="small-button">-25</button></form>
<form action="/send-irc" method="POST" target="hiddenFrame"><input type="hidden" name="bot" value="player4bot"><input type="hidden" name="msg" value="!add p2 -5"><button type="submit" class="small-button">-5</button></form>
<div style="width:4px; background:#888; margin:0 4px;"></div>
<form action="/send-irc" method="POST" target="hiddenFrame"><input type="hidden" name="bot" value="player4bot"><input type="hidden" name="msg" value="!bidadd 5"><button type="submit" class="small-button">5</button></form>
<form action="/send-irc" method="POST" target="hiddenFrame"><input type="hidden" name="bot" value="player4bot"><input type="hidden" name="msg" value="!bidadd 10"><button type="submit" class="small-button">10</button></form>
<form action="/send-irc" method="POST" target="hiddenFrame"><input type="hidden" name="bot" value="player4bot"><input type="hidden" name="msg" value="!bidadd 25"><button type="submit" class="small-button">25</button></form>
<form action="/send-irc" method="POST" target="hiddenFrame"><input type="hidden" name="bot" value="player4bot"><input type="hidden" name="msg" value="!bidadd 50"><button type="submit" class="small-button">50</button></form>
<form action="/send-irc" method="POST" target="hiddenFrame"><input type="hidden" name="bot" value="player4bot"><input type="hidden" name="msg" value="!bidadd 90"><button type="submit" class="small-button">90</button></form>
<form action="/send-irc" method="POST" target="hiddenFrame"><input type="hidden" name="bot" value="player4bot"><input type="hidden" name="msg" value="!fold"><button type="submit" class="small-button">F</button></form>

</div>
<iframe id="chatFrame" src="https://web.libera.chat/gamja/##rento" title="IRC Chat" loading="lazy" allow="clipboard-read; clipboard-write"></iframe>
</div>
</div>

<script src="/socket.io/socket.io.js"></script>
<script>
const socket = io();
const colorMap = {red:"p1", blue:"p2", yellow:"p3", green:"p4"};
const buildingPositions = {
  1:{x:742,y:750},3:{x:597,y:750},6:{x:375,y:750},8:{x:230,y:750},9:{x:155,y:750},
  11:{x:104,y:699},12:{x:107,y:630},14:{x:110,y:495},16:{x:114,y:362},17:{x:117,y:299},
  19:{x:120,y:175},21:{x:174,y:133},22:{x:240,y:135},24:{x:380,y:135},26:{x:520,y:135},
  28:{x:655,y:135},29:{x:724,y:135},31:{x:773,y:173},33:{x:776,y:297},34:{x:779,y:362},
  37:{x:786,y:562},39:{x:790,y:697}
};

// Pieces
function updatePieces(data){
const boardPositions={};
for(const [color,pos] of Object.entries(data)){
if(!pos||typeof pos.x!=="number"||typeof pos.y!=="number") continue;
const key=`${pos.x}-${pos.y}`;
if(!boardPositions[key]) boardPositions[key]=[];
boardPositions[key].push(color);
}
for(const [key,colors] of Object.entries(boardPositions)){
colors.forEach((color,index)=>{
const id=colorMap[color];
if(!id) return;
const el=document.getElementById(id);
if(!el) return;
const pos=data[color];
const offset=8;
el.style.left=(pos.x+index*offset)+'px';
el.style.top=(pos.y+index*offset)+'px';
});
}
}

// Displays
function updateDisplay1(text){ document.getElementById('display1').innerText = text || ''; }
function updateDisplay2(text){ document.getElementById('display2').innerText = text || ''; }

// Money
function updateMoney(data){
document.getElementById('money-p1-overlay').textContent = 'Player1: $' + data.p1;
document.getElementById('money-p2-overlay').textContent = 'Player2: $' + data.p2;
document.getElementById('money-p3-overlay').textContent = 'Player3: $' + data.p3;
document.getElementById('money-p4-overlay').textContent = 'Player4: $' + data.p4;
}

// Buildings
function renderElements(type,data,imgSrc){
document.querySelectorAll(`.${type}`).forEach(el=>el.remove());
const board=document.getElementById('board');
for(const [space,active] of Object.entries(data)){
if(active && buildingPositions[space]){
const pos=buildingPositions[space];
const el=document.createElement('img');
el.src=imgSrc;
el.className=type;
el.style.left=(pos.x-12)+'px';
el.style.top=(pos.y-12)+'px';
board.appendChild(el);
}
}
}

// Initial fetch
fetch('/pieces.json').then(res=>res.json()).then(updatePieces);
fetch('/display1.json').then(res=>res.json()).then(data=>updateDisplay1(data.text));
fetch('/display2.json').then(res=>res.json()).then(data=>updateDisplay2(data.text));
fetch('/money.json').then(res=>res.json()).then(updateMoney);
fetch('/hotels.json').then(res=>res.json()).then(data=>renderElements('hotel',data,'https://raw.githubusercontent.com/nightywolfy/monopoly/main/hotel.webp'));
fetch('/houses.json').then(res=>res.json()).then(data=>renderElements('house',data,'https://raw.githubusercontent.com/nightywolfy/monopoly/main/house.webp'));

// Socket.IO updates
socket.on('piecesUpdate',updatePieces);
socket.on('displayUpdate1', data => updateDisplay1(data.text));
socket.on('displayUpdate2', data => updateDisplay2(data.text));
socket.on('moneyUpdate',updateMoney);
socket.on('hotelsUpdate',data=>renderElements('hotel',data,'https://raw.githubusercontent.com/nightywolfy/monopoly/main/hotel.webp'));
socket.on('housesUpdate',data=>renderElements('house',data,'https://raw.githubusercontent.com/nightywolfy/monopoly/main/house.webp'));

const boardSpaces = [
  { number: 0,  x: 830, y: 770 }, { number: 1,  x: 715, y: 735 },
  { number: 2,  x: 640, y: 735 }, { number: 3,  x: 570, y: 735 },
  { number: 4,  x: 495, y: 735 }, { number: 5,  x: 420, y: 735 },
  { number: 6,  x: 345, y: 735 }, { number: 7,  x: 270, y: 735 },
  { number: 8,  x: 199, y: 735 }, { number: 9,  x: 128, y: 735 },
  { number: 10, x: 40,  y: 735 }, { number: 11, x: 66,  y: 675 },
  { number: 12, x: 66,  y: 605 }, { number: 13, x: 69,  y: 537 },
  { number: 14, x: 73,  y: 468 }, { number: 15, x: 75,  y: 402 },
  { number: 16, x: 75,  y: 338 }, { number: 17, x: 78,  y: 273 },
  { number: 18, x: 75,  y: 209 }, { number: 19, x: 80,  y: 149 },
  { number: 20, x: 80, y: 99  }, { number: 21, x: 140, y: 99  },
  { number: 22, x: 210, y: 99  }, { number: 23, x: 295, y: 99  },
  { number: 24, x: 350, y: 99  }, { number: 25, x: 420, y: 99  },
  { number: 26, x: 490, y: 99  }, { number: 27, x: 555, y: 99  },
  { number: 28, x: 625, y: 99  }, { number: 29, x: 695, y: 99  },
  { number: 30, x: 786, y: 99  }, { number: 31, x: 760, y: 147 },
  { number: 32, x: 765, y: 200 }, { number: 33, x: 763, y: 272 },
  { number: 34, x: 766, y: 337 }, { number: 35, x: 769, y: 402 },
  { number: 36, x: 776, y: 460 }, { number: 37, x: 772, y: 537 },
  { number: 38, x: 774, y: 603 }, { number: 39, x: 777, y: 673 }
];


const allSpaces = [
  1,3,4,5,6,8,9,11,12,13,14,15,16,17,19,21,22,24,25,26,27,28,29,31,33,34,35,37,38,39
];

const group1 = [1,3,4,5,6,8,9,21,22,24,25,26,27,28,29];
const group2 = [11,12,13,14,15,16,17,19,31,33,34,35,37,38,39];

const boardButtonsContainer = document.getElementById('boardButtons');

// Mode toggle logic
const modeButtons = document.querySelectorAll('.mode-btn');
let currentMode = 'redeem';
modeButtons.forEach(btn => {
    btn.addEventListener('click', () => {
        modeButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentMode = btn.dataset.mode;

        boardButtonsContainer.querySelectorAll('button').forEach(b => {
            const spaceNum = b.textContent;
            b.title = `${currentMode.charAt(0).toUpperCase() + currentMode.slice(1)} space ${spaceNum}`;
        });
    });
});

// Play sound
function playSound(filename) {
    new Audio(filename).play().catch(()=>{});
}

// Sound URLs
const soundURLs = {
    redeem: 'https://raw.githubusercontent.com/nightywolfy/monopoly/main/redeem.mp3',
    mortgage: 'https://raw.githubusercontent.com/nightywolfy/monopoly/main/mortgage.mp3'
};

// Generate board buttons
allSpaces.forEach(spaceNum => {
    const coords = boardSpaces.find(b => b.number === spaceNum);
    if (!coords) return;

    const btn = document.createElement('button');
    btn.textContent = spaceNum;
    btn.title = `Redeem space ${spaceNum}`;
    btn.style.position = 'absolute';
    btn.style.left = `${coords.x}px`;
    btn.style.top = `${coords.y}px`;

    if (group1.includes(spaceNum)) {
        btn.style.width = '50px';
        btn.style.height = '50px';
        btn.style.fontSize = '0.85em';
    } else if (group2.includes(spaceNum)) {
        btn.style.width = '50px';
        btn.style.height = '50px';
        btn.style.fontSize = '0.75em';
    } else {
        btn.style.width = '45px';
        btn.style.height = '22px';
        btn.style.fontSize = '0.8em';
    }

    btn.style.backgroundColor = 'rgba(128,128,128,0.4)';
    btn.style.border = '1px solid rgba(255,255,255,0.6)';
    btn.style.color = 'white';
    btn.style.zIndex = 50;
    btn.style.cursor = 'pointer';

    btn.addEventListener('click', () => {
        socket.emit('sendMessage', { bot: 'player4bot', msg: `!${currentMode} ${spaceNum}` });
        playSound(soundURLs[currentMode]);
    });

    boardButtonsContainer.appendChild(btn);
});

// Make board buttons invisible
boardButtonsContainer.querySelectorAll('button').forEach(btn => {
    const spaceNum = parseInt(btn.textContent);
    if (spaceNum >= 1 && spaceNum <= 39) {
        btn.style.backgroundColor = 'transparent';
        btn.style.border = 'none';
        btn.style.color = 'transparent';
    }
});

// Refresh board image
function refreshBoardImage() {
    const boardImg = document.getElementById('boardImg');
    boardImg.src = 'map.webp?t=' + Date.now();
}
setInterval(refreshBoardImage, 60000);

</script>
</body>
</html>
