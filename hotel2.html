
<html lang="en">
<head>

<style>
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    background: black;
    display: flex;
    font-family: sans-serif;
}

/* Left: Board */
#boardContainer {
    width: 55%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    background: black;
    position: relative;
}
#board {
    position: relative;
    width: 900px;
    height: 900px;
}
#boardImg {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

.hotel, .house {
    width: 24px;
    height: 24px;
}
</style>
</head>
<div id="boardContainer">
<div id="board">
<img id="boardImg" src="map.webp" alt="Monopoly Board">
<div id="boardButtons"></div>
</div>
</div>

<script>
const buildingPositions = {
  1:{x:742,y:750},3:{x:597,y:750},6:{x:375,y:750},8:{x:230,y:750},9:{x:155,y:750},
  11:{x:104,y:699},12:{x:107,y:630},14:{x:110,y:495},16:{x:114,y:362},17:{x:117,y:299},
  19:{x:120,y:175},21:{x:174,y:135},22:{x:240,y:135},24:{x:380,y:135},26:{x:520,y:135},
  28:{x:655,y:135},29:{x:724,y:135},31:{x:773,y:173},33:{x:776,y:297},34:{x:779,y:362},
  37:{x:786,y:562},39:{x:790,y:697}
};

function scalePosition(pos) {
  return pos;
}

// Houses & hotels
async function refreshElements(type, url, positions, imgSrc) {
  try {
    const res = await fetch(`${url}?t=${Date.now()}`);
    const data = await res.json();
    document.querySelectorAll(`.${type}`).forEach(el => el.remove());
    const board = document.getElementById('board');
    for (const [space, active] of Object.entries(data)) {
      if (active && positions[space]) {
        const pos = positions[space];
        const el = document.createElement('img');
        el.src = imgSrc;
        el.className = type;
        el.style.position = 'absolute';
        el.style.left = (pos.x - 12) + 'px';
        el.style.top  = (pos.y - 12) + 'px';
        board.appendChild(el);
      }
    }
  } catch (e) { console.error(`Error loading ${type}:`, e); }
}

setInterval(() => refreshElements('hotel', '/hotels.json', buildingPositions, 'hotel.webp'), 1000);
setInterval(() => refreshElements('house', '/houses.json', buildingPositions, 'house.webp'), 1000);
</script>

</body>
</html>
